# 如果页面白屏时间过长，从哪些方面去排查和解决问题

前端加载链路、渲染逻辑、网络、资源优化

## 网络与资源加载

1. 网络请求慢
   首屏 JS/CSS/HTML 体积大。
   API 接口响应慢。
2. 静态资源加载
   图片、字体、第三方脚本阻塞渲染。
   没有使用 CDN 或缓存策略。
3. 排查工具
   浏览器 DevTools → Network 面板看 DOMContentLoaded 和 Load 时间。
   Lighthouse → 首屏性能指标。
   WebPageTest → 可查看 FCP/TTFB/白屏时间。

## JS 执行阻塞

1. 主线程阻塞
   JS 打包文件过大（如大型库 + 自己的业务代码）。
   第三方 SDK/广告脚本阻塞主线程。
2. 首次渲染前依赖 JS
   SPA 框架渲染依赖大量 JS 执行。
3. 排查工具
   Chrome DevTools → Performance 面板 → CPU 火焰图，查看长任务。
   Lighthouse → JS 执行时间。

## CSS 渲染问题

1. 样式阻塞渲染
   外链 CSS 未压缩或过大。
   CSS 使用了 @import，导致 render-blocking。
2. 字体加载
   Web Font 阻塞首次绘制。
   没有使用 font-display: swap。
3. 排查工具
   Network 面板查看 CSS 下载时间。
   Rendering / Coverage 面板检查未使用 CSS。

## 渲染逻辑问题

1. 框架初始化慢
   React/Vue 首次渲染前需要执行大量 JS。
2. 组件懒加载/异步加载
   Suspense fallback 时间长，首屏白屏。
3. 同步计算阻塞
   渲染前计算量大（如复杂数组处理、循环嵌套）。
4. 排查工具
   React Profiler / Vue DevTools → 查看组件挂载耗时。
   Performance 面板 → 识别长渲染任务。

## 服务端因素（SSR）

1. HTML 响应慢 → 首屏白屏时间长。
2. API 数据慢 → 如果 SSR 等待数据完成再渲染。
3. 排查工具
   Chrome Network → 查看 HTML 首字节时间 (TTFB)。
   后端日志 → 接口耗时统计。

## 实践排查流程示例

1. 打开 DevTools → Network → 看 HTML、JS、CSS 下载时间。
2. Performance 面板录制 → 看 JS 执行时间和长任务。
3. React Profiler / Vue DevTools → 找出首屏组件渲染耗时。
4. 检查 Suspense fallback 或懒加载组件的加载时间。
5. 根据排查结果优化：资源压缩、代码分割、SSR 或流式渲染
